---
---

<!-- Hero Image Slider -->
<section class="slider-container relative w-full overflow-hidden" style="aspect-ratio: 16/9;">
  <!-- Slide 1 -->
  <div class="slide active absolute inset-0 w-full h-full">
    <img 
      src="https://i.imgur.com/2zhEvVU.jpg" 
      alt="Peacetival Event 1"
      class="w-full h-full object-contain bg-black"
    />
  </div>
  
  <!-- Slide 2 -->
  <div class="slide absolute inset-0 w-full h-full opacity-0">
    <img 
      src="https://i.imgur.com/K51k5kw.jpg" 
      alt="Peacetival Event 2"
      class="w-full h-full object-contain bg-black"
    />
  </div>
  
  <!-- Slide 3 -->
  <div class="slide absolute inset-0 w-full h-full opacity-0">
    <img 
      src="https://i.imgur.com/twdJxgq.jpg" 
      alt="Peacetival Event 3"
      class="w-full h-full object-contain bg-black"
    />
  </div>
  
  <!-- Slide 4 -->
  <div class="slide absolute inset-0 w-full h-full opacity-0">
    <img 
      src="https://i.imgur.com/wr37v8I.jpg" 
      alt="Peacetival Event 4"
      class="w-full h-full object-contain bg-black"
    />
  </div>
  
  <!-- Overlay gradient (optional) -->
  <div class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/30 pointer-events-none"></div>
  
  <!-- Navigation Dots -->
  <div class="nav-controls absolute bottom-4 left-1/2 transform -translate-x-1/2 z-20 flex gap-2 opacity-0 transition-opacity duration-300">
    <button class="dot active w-2 h-2 rounded-full bg-white transition-all duration-300" data-slide="0"></button>
    <button class="dot w-2 h-2 rounded-full bg-white/50 transition-all duration-300" data-slide="1"></button>
    <button class="dot w-2 h-2 rounded-full bg-white/50 transition-all duration-300" data-slide="2"></button>
    <button class="dot w-2 h-2 rounded-full bg-white/50 transition-all duration-300" data-slide="3"></button>
  </div>
  
  <!-- Navigation Arrows -->
  <button class="nav-arrow nav-controls absolute left-3 top-1/2 transform -translate-y-1/2 z-20 bg-black/30 hover:bg-black/50 text-white p-2 rounded-full transition-all duration-300 opacity-0" id="prevBtn">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
    </svg>
  </button>
  
  <button class="nav-arrow nav-controls absolute right-3 top-1/2 transform -translate-y-1/2 z-20 bg-black/30 hover:bg-black/50 text-white p-2 rounded-full transition-all duration-300 opacity-0" id="nextBtn">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
    </svg>
  </button>
</section>

<style>
  .slide {
    transition: opacity 1s ease-in-out;
  }
  
  .slide.active {
    opacity: 1;
  }
  
  .dot.active {
    background-color: white;
    transform: scale(1.3);
  }
  
  .slider-container:hover .nav-controls {
    opacity: 1;
  }
  
  /* Hide arrows on mobile/touch devices */
  @media (hover: none) and (pointer: coarse) {
    .nav-arrow {
      display: none;
    }
  }
</style>

<script>
  let currentSlide = 0;
  const slides = document.querySelectorAll('.slide');
  const dots = document.querySelectorAll('.dot');
  const totalSlides = slides.length;
  // Use ReturnType<typeof setInterval> for Node vs Browser compatibility during Astro build
  let autoSlideInterval: ReturnType<typeof setInterval>;
  
  // Touch/Swipe variables
  let touchStartX = 0;
  let touchEndX = 0;
  let touchStartY = 0;
  let touchEndY = 0;

  function showSlide(index: number) {
    // Remove active class from all
    slides.forEach(slide => slide.classList.remove('active'));
    dots.forEach(dot => dot.classList.remove('active'));
    
    // Add active to current
    slides[index].classList.add('active');
    dots[index].classList.add('active');
  }

  function nextSlide() {
    currentSlide = (currentSlide + 1) % totalSlides;
    showSlide(currentSlide);
  }

  function prevSlide() {
    currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
    showSlide(currentSlide);
  }

  function goToSlide(index: number) {
    currentSlide = index;
    showSlide(currentSlide);
    resetAutoSlide();
  }

  function startAutoSlide() {
    autoSlideInterval = setInterval(nextSlide, 4000); // Change slide every 4 seconds
  }

  function resetAutoSlide() {
    clearInterval(autoSlideInterval);
    startAutoSlide();
  }

  function handleSwipe() {
    const swipeThreshold = 50; // minimum distance for swipe
    const swipeDistanceX = touchEndX - touchStartX;
    const swipeDistanceY = Math.abs(touchEndY - touchStartY);
    
    // Only register horizontal swipes (not vertical scrolls)
    if (Math.abs(swipeDistanceX) > swipeThreshold && swipeDistanceY < 100) {
      if (swipeDistanceX < 0) {
        // Swipe left - next slide
        nextSlide();
        resetAutoSlide();
      } else {
        // Swipe right - previous slide
        prevSlide();
        resetAutoSlide();
      }
    }
  }

  // Event listeners
  document.getElementById('nextBtn')?.addEventListener('click', () => {
    nextSlide();
    resetAutoSlide();
  });

  document.getElementById('prevBtn')?.addEventListener('click', () => {
    prevSlide();
    resetAutoSlide();
  });

  dots.forEach((dot, index) => {
    dot.addEventListener('click', () => goToSlide(index));
  });

  // Touch events for swipe
  const sliderContainer = document.querySelector('.slider-container');
  
  sliderContainer?.addEventListener('touchstart', (e: TouchEvent) => {
    touchStartX = e.touches[0].clientX;
    touchStartY = e.touches[0].clientY;
  });

  sliderContainer?.addEventListener('touchmove', (e: TouchEvent) => {
    touchEndX = e.touches[0].clientX;
    touchEndY = e.touches[0].clientY;
  });

  sliderContainer?.addEventListener('touchend', () => {
    handleSwipe();
  });

  // Start auto-slide on page load
  startAutoSlide();

  // Pause on hover (desktop only)
  sliderContainer?.addEventListener('mouseenter', () => clearInterval(autoSlideInterval));
  sliderContainer?.addEventListener('mouseleave', () => startAutoSlide());
</script>

